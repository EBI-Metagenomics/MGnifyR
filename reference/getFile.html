<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Download any MGnify files, also including processed reads and
identified protein sequences
Listing files available for download"><title>Download any MGnify files, also including processed reads and
identified protein sequences — getFile • MGnifyR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download any MGnify files, also including processed reads and
identified protein sequences — getFile"><meta property="og:description" content="Download any MGnify files, also including processed reads and
identified protein sequences
Listing files available for download"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MGnifyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.28</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/MGnifyR.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/MGnifyR_long.html">MGnifyR, extended vignette</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/EBI-Metagenomics/MGnifyR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Download any MGnify files, also including processed reads and
identified protein sequences</h1>
      <small class="dont-index">Source: <a href="https://github.com/EBI-Metagenomics/MGnifyR/blob/HEAD/R/AllGenerics.R" class="external-link"><code>R/AllGenerics.R</code></a>, <a href="https://github.com/EBI-Metagenomics/MGnifyR/blob/HEAD/R/getFile.R" class="external-link"><code>R/getFile.R</code></a></small>
      <div class="d-none name"><code>getFile.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Download any MGnify files, also including processed reads and
identified protein sequences</p>
<p>Listing files available for download</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getFile</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">searchFile</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for MgnifyClient</span></span>
<span><span class="fu">getFile</span><span class="op">(</span><span class="va">x</span>, <span class="va">url</span>, file <span class="op">=</span> <span class="cn">NULL</span>, read.func <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for MgnifyClient</span></span>
<span><span class="fu">searchFile</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">accession</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"studies"</span>, <span class="st">"samples"</span>, <span class="st">"analyses"</span>, <span class="st">"assemblies"</span>, <span class="st">"genomes"</span>, <span class="st">"run"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A <code>MgnifyClient</code> object.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments; not used currently.</p></dd>


<dt>url</dt>
<dd><p>A single character value specifying the url address of the file
we wish to download.</p></dd>


<dt>file</dt>
<dd><p>A single character value or NULL specifying an
optional local filename to use for saving the file. If NULL (default),
MGNify local cache settings will be used. If the file is intended to be
processed in a separate program, it may be sensible to provide a
meaningful <code>file</code>, rather than having to hunt through the
cache folders. If <code>file</code> is NULL <em>and</em> <code>useCache(client)</code>
is <code>FALSE</code>, the <code>read.func</code> parameter must be supplied or the
file will be downloaded and then deleted.
(By default: <code>file = NULL</code>)</p></dd>


<dt>read.func</dt>
<dd><p>A function specifying an optional function to process the
downloaded file and return the results, rather than relying on post
processing. The primary use-case for this parameter is when local disk
space is limited and downloaded files can be quickly processed and
discarded. The function should take a single parameter, the downloaded
filename, and may return any valid R object.
(By default: <code>read.func = NULL</code>)</p></dd>


<dt>accession</dt>
<dd><p>A single character value or a vector of character values
specifying accession IDs to return results for.</p></dd>


<dt>type</dt>
<dd><p>A single character value specifying the type of objects to
query. Must be one of the following options: <code>analysis</code>, <code>samples</code>,
<code>studies</code>, <code>assembly</code>, <code>genome</code> or <code>run</code>.
(By default: <code>type = "samples"</code>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Either the local filename of the downloaded file, be it either the
location in the MGNifyR cache or file. If <code>read.func</code> is
used, its result will be returned.</p>


<p><code>data.frame</code> containing all discovered downloads. If
multiple <code>accessions</code> are queried, the <code>accessions</code> column
may to filter the results - since rownames are not set (and wouldn;'t
make sense as each query will return multiple items)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>getFile</code> is a convenient wrapper round generic the URL
downloading functionality in R, taking care of things like local
caching and authentication.</p>
<p>THe function is a wrapper function allowing easy enumeration
of downloads available for a given accession (or list thereof). Returns a
single data.frame containing all available downloads and associated
metadata, including the url location and description. This can then be
filtered to extract the urls of interest, before actually
retrieving the files using <code>mgnify_download</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Make a client object</span></span></span>
<span class="r-in"><span><span class="va">mg</span> <span class="op">&lt;-</span> <span class="fu"><a href="MgnifyClient.html">MgnifyClient</a></span><span class="op">(</span>useCache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a vector of accession ids - these happen to be \code{analysis}</span></span></span>
<span class="r-in"><span><span class="co"># accessions</span></span></span>
<span class="r-in"><span><span class="va">accession_vect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MGYA00563876"</span>, <span class="st">"MGYA00563877"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">downloads</span> <span class="op">&lt;-</span> <span class="fu">searchFile</span><span class="op">(</span><span class="va">mg</span>, <span class="va">accession_vect</span>, <span class="st">"analyses"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Searching files...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================================================| 100%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter to find the urls of 16S encoding sequences</span></span></span>
<span class="r-in"><span><span class="va">url_list</span> <span class="op">&lt;-</span> <span class="va">downloads</span><span class="op">[</span></span></span>
<span class="r-in"><span>    <span class="va">downloads</span><span class="op">$</span><span class="va">attributes.description.label</span> <span class="op">==</span> <span class="st">"Contigs encoding SSU rRNA"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"download_url"</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1:</span></span></span>
<span class="r-in"><span><span class="co"># Download the first file</span></span></span>
<span class="r-in"><span><span class="va">supplied_filename</span> <span class="op">&lt;-</span> <span class="fu">getFile</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mg</span>, <span class="va">url_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, file<span class="op">=</span><span class="st">"SSU_file.fasta.gz"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Example 2:</span></span></span>
<span class="r-in"><span><span class="co"># Just use local caching</span></span></span>
<span class="r-in"><span><span class="va">cached_filename</span> <span class="op">&lt;-</span> <span class="fu">getFile</span><span class="op">(</span><span class="va">mg</span>, <span class="va">url_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3:</span></span></span>
<span class="r-in"><span><span class="co"># Using read.func to open the reads with readDNAStringSet from</span></span></span>
<span class="r-in"><span><span class="co"># \code{biostrings}. Without retaining on disk</span></span></span>
<span class="r-in"><span><span class="va">dna_seqs</span> <span class="op">&lt;-</span> <span class="fu">getFile</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mg</span>, <span class="va">url_list</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>, read.func <span class="op">=</span> <span class="va">readDNAStringSet</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a client object</span></span></span>
<span class="r-in"><span><span class="va">mg</span> <span class="op">&lt;-</span> <span class="fu"><a href="MgnifyClient.html">MgnifyClient</a></span><span class="op">(</span>useCache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Create a vector of accession ids - these happen to be \code{analysis}</span></span></span>
<span class="r-in"><span><span class="co"># accessions</span></span></span>
<span class="r-in"><span><span class="va">accession_vect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"MGYA00563876"</span>, <span class="st">"MGYA00563877"</span>, <span class="st">"MGYA00563878"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"MGYA00563879"</span>, <span class="st">"MGYA00563880"</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">downloads</span> <span class="op">&lt;-</span> <span class="fu">searchFile</span><span class="op">(</span><span class="va">mg</span>, <span class="va">accession_vect</span>, <span class="st">"analyses"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Searching files...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |==============                                                        |  20%  |                                                                              |============================                                          |  40%  |                                                                              |==========================================                            |  60%  |                                                                              |========================================================              |  80%  |                                                                              |======================================================================| 100%</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tuomas Borman, Ben Allen, Leo Lahti.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

